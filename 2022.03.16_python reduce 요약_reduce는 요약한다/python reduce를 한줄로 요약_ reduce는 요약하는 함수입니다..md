# python reduce의 여러 모습들을 한 줄로 요약: reduce는 요약한다.

python reduce는 리스트의 여러원소들이 가진 특성을 하나로 정리해줍니다.  
(물론 리스트 뿐만이 아니고 모든 반복가능한 데이터 형들이 대상입니다.)

특성을 하나로 정리한다는 말이 사실은 엄청 광범위한 말인데, 시각자료로 설명해보겠습니다.

## 눈이 휘둥그레지는 reduce 세계

reduce의 세계에 오신것을 환영합니다!  
이곳은 아주 골 때리고 요절복통인 세계입니다..

![image.png](attachment:0afc801e-9802-4d66-8370-ee2e574de5ef.png)

이러한 리스트가 있다고 가정합시다.  
7개의 원소가 있는 리스트군요.

![image.png](attachment:c1b2e05b-59ad-43a3-ad9f-07329fea2ac5.png)

그리고 나서 뜬금없이,  

2개의 재료를 받아서 짝짜꿍한 결과를 반환하는 "어떤 함수"를 준비합니다.  
아직 질문하지 마세여.

좀 더 보시고 난 담에 질문하시어요.

![image.png](attachment:ad713e89-f3b9-4ed3-b1ba-c102ea026a58.png)

그 다음에 우리는 이런 짓을 할 겁니다.  
a 와 b만 꺼내서 어떤함수에 집어넣고, 짝짜꿍한 결과를 만들어내는 거죠.  

a 와 b 가 나머지를 따돌리고 단 둘이서만 어떤 값을 만들었습니다. 거기다가 acc라는 이름을 붙였죠.  
괘씸하죠?

![image.png](attachment:2e76ec5b-56ff-45bb-b87b-363f1f338404.png)

단 둘이서만 결실을 만들어낸 a 와 b 를 응징하기 위해 나머지 원소들도 참전합니다!!  
a와 b가 만들었던 결과인 acc와 다시 결합해서 결과를 만들고, 그 결과의 이름도 acc로 붙여버립니다...!!!  


보기에는 혼돈, 파괴, 망각 이지만, reduce의 세계에서는 너무나도 질서정연한 규칙이자 원리 입니다.

reduce가 휩쓸고 간 자리에는 7개의 원소는 온데간데 없고,  
최종결과인 acc만 남아서 광야에 떨고 있습니다.

## 짝짜꿍 과정을 코드로 살펴봅시다

자 이제 실제 코드로 좀 더 자세히 볼까요?


```python
from functools import reduce
```

reduce는 파이썬 표준라이브러리인 functools의 내부에 위치하고 있습니다. 따라서 위와같이 import한 뒤에 사용해야 합니다.


```python
어떤리스트 = [ 1, 2, 3, 4, 5, 6, 7 ]
```

**어떤리스트**를 준비하고요.


```python
def 어떤더하기(a, b):
    acc = a + b
    return acc
```

그 다음엔, a 와 b 를 짝짜꿍 시켜줄 **어떤더하기** 함수를 만들어 줍니다.  
재료로 받은 두 수를 더해서 그 값을 다시 반환해 주네요.


```python
최종결과 = reduce(어떤더하기, 어떤리스트)
print(f"어떤리스트는 잊혀지고 마지막으로 {최종결과} 만 남았다...")
```

    어떤리스트는 잊혀지고 마지막으로 28 만 남았다...


예제 코드를 보니 아까 그림으로 설명했던 과정이 더 자세히 이해가 되죠?

## 최초값을 지정하는 경우의 reduce

reduce함수는 아까전의 예제코드에서는 함수하나와, 리스트 하나를 인자로 받았습니다.  
하지만 원래 reduce함수가 취하는 인자의 갯수는 3개 입니다. 하나는 어디로 간걸까요?  

별건아니고 3번째 인자를 생략하면 자동으로 어떤리스트의 0번째 값을 최초값으로 지정합니다.  

그런데 만약, 3번째 인자를 전달 받으면 계산과정이 아주 살짝 달라집니다.
이것도 그림으로 보세요.

![image.png](attachment:a76886f5-e3f3-443a-a085-4b4f8e97ca12.png)

맨 처음 설명처럼 a 와 b 를 짝짜꿍 하는 게 아니라,  
최초값으로 받은 값을 a와 먼저 짝짜꿍 시킨다음, 그 결과를 b랑 짝짜꿍 시킵니다.  
코드로 써볼까요?


```python
최종결과 = reduce(어떤더하기, 어떤리스트, 100)
print(f"어떤리스트는 잊혀지고 마지막으로 {최종결과} 만 남았다...")
```

    어떤리스트는 잊혀지고 마지막으로 128 만 남았다...


최초값이 100으로 주어지니, 100부터 시작해서 모든 원소들을 다 더한 값인 **128**이 결과로 반환되었습니다!!!!!!!


```python

```


```python

```


```python

```


```python

```


```python
과테말라_커피가루 = [
    {'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.00},
    {'이름': '광물질', '용해성': '불용성', '로스팅후변화': False, '함량': 0.10},
    {'이름': '지방', '용해성': '지용성', '로스팅후변화': False, '함량': 1.00},
    {'이름': '탄닌산', '용해성': '수용성', '로스팅후변화': True, '함량': 7.00},
    {'이름': '클로로겐산', '용해성': '수용성', '로스팅후변화': True, '함량': 3.00},
    {'이름': '트리고넬린', '용해성': '수용성', '로스팅후변화': False, '함량': 2.50},
    {'이름': '탄산가스', '용해성': '불용성', '로스팅후변화': True, '함량': 0.01},
    {'이름': '당분', '용해성': '수용성', '로스팅후변화': True, '함량': 1.50},
    {'이름': '섬유소', '용해성': '불용성', '로스팅후변화': True, '함량': 0.70},
        ]

케냐AA_커피가루 = [
    {'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.00},
    {'이름': '광물질', '용해성': '불용성', '로스팅후변화': False, '함량': 0.10},
    {'이름': '지방', '용해성': '지용성', '로스팅후변화': False, '함량': 1.00},
    {'이름': '탄닌산', '용해성': '수용성', '로스팅후변화': True, '함량': 7.00},
    {'이름': '클로로겐산', '용해성': '수용성', '로스팅후변화': True, '함량': 3.00},
    {'이름': '트리고넬린', '용해성': '수용성', '로스팅후변화': False, '함량': 2.50},
    {'이름': '탄산가스', '용해성': '불용성', '로스팅후변화': True, '함량': 0.01},
    {'이름': '당분', '용해성': '수용성', '로스팅후변화': True, '함량': 1.50},
    {'이름': '섬유소', '용해성': '불용성', '로스팅후변화': True, '함량': 0.70},
        ]

예가체프_커피가루 = [
    {'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.00},
    {'이름': '광물질', '용해성': '불용성', '로스팅후변화': False, '함량': 0.10},
    {'이름': '지방', '용해성': '지용성', '로스팅후변화': False, '함량': 1.00},
    {'이름': '탄닌산', '용해성': '수용성', '로스팅후변화': True, '함량': 7.00},
    {'이름': '클로로겐산', '용해성': '수용성', '로스팅후변화': True, '함량': 3.00},
    {'이름': '트리고넬린', '용해성': '수용성', '로스팅후변화': False, '함량': 2.50},
    {'이름': '탄산가스', '용해성': '불용성', '로스팅후변화': True, '함량': 0.01},
    {'이름': '당분', '용해성': '수용성', '로스팅후변화': True, '함량': 1.50},
    {'이름': '섬유소', '용해성': '불용성', '로스팅후변화': True, '함량': 0.70},
        ]

원두진열대 = [
    과테말라_커피가루,
    케냐AA_커피가루,
    예가체프_커피가루
]
```


```python
def 성분합산(원두진열대, 성분):
    def 원두성분필터링(원두, 성분):
        return list(filter(lambda x: x['이름']==성분, 원두))[0]
    return list(map(lambda x: 원두성분필터링(x,성분), 원두진열대))
    
```


```python
성분합산(원두진열대, "카페인")
```




    [{'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.0},
     {'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.0},
     {'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.0}]




```python
원두성분필터링(과테말라_커피가루, '카페인')
```




    [{'이름': '카페인', '용해성': '수용성', '로스팅후변화': False, '함량': 10.0}]




```python
def 카페인함량합산(누적결과, 신규항목):
    신규항목_카페인성분 = list(filter(lambda x: 신규항목[x]['이름'] == '카페인', 신규항목))
    누적결과 = 누적결과 + 신규항목_카페인성분
    return 누적결과
```


```python
결과 = reduce(카페인함량합산, 원두진열대, 0)
결과
```


    

    TypeErrorTraceback (most recent call last)

    <ipython-input-32-5b7d383df44e> in <module>
    ----> 1 결과 = reduce(카페인함량합산, 원두진열대, 0)
          2 결과


    <ipython-input-31-064ee2644ba1> in 카페인함량합산(누적결과, 신규항목)
          1 def 카페인함량합산(누적결과, 신규항목):
    ----> 2     신규항목_카페인성분 = list(filter(lambda x: 신규항목[x]['이름'] == '카페인', 신규항목))
          3     누적결과 = 누적결과 + 신규항목_카페인성분
          4     return 누적결과


    <ipython-input-31-064ee2644ba1> in <lambda>(x)
          1 def 카페인함량합산(누적결과, 신규항목):
    ----> 2     신규항목_카페인성분 = list(filter(lambda x: 신규항목[x]['이름'] == '카페인', 신규항목))
          3     누적결과 = 누적결과 + 신규항목_카페인성분
          4     return 누적결과


    TypeError: string indices must be integers



```python

```


```python

```
